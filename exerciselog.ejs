<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracker</title>
    <link rel="stylesheet" href="/styles/exerciselog.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body id="body" onload="updateDateTime">
   <%- include('partials/navbar') %>
    <span id="datetime"></span>
    <table class="WorkoutLogger">
        <thead>
            <tr>
                <th scope="col" class="topRow">Activity Name</th>
                <th scope="col" class="topRow">Duration</th>
                <th scope="col" class="topRow">Calories burned</th>
            </tr>
        </thead>
        <tbody>
            <% let totalTime = 0, totalCalories = 0; %>
            <% for(let workout of exerciseLog){%>
                <tr>
                    <td class="trow"><%= workout.id%></td>
                    <td class="trow" onclick="editExercise('<%= workout.id %>', '<%= workout.cardioname %>', '<%= workout.duration %>', '<%= workout.calories %>')">
                        <%= workout.cardioname %>
                    </td>
                    <td class="trow"><%= workout.duration %> min</td>
                    <td class="trow"><%= workout.calories %></td>
                    <td class="deleterow">
                        <form id="deleteForm" action="/exerciselog/?_method=delete" method="post">
                            <input type="hidden" id="id" name="id" value="<%= workout.id %>">
                            <button type="submit">Delete</button>
                        </form>
                    </td>
                    <% totalTime += workout.duration;%>
                    <% totalCalories += workout.calories;%>
                </tr>
            <% } %>
            <tr class="bottom">
                <td class="addExercise"><a href="add_to_log">Add Exercise</a></td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td>
                    <span class="Daily">Total: <%= totalTime %>(Minutes)</span>
                    <span class="Goal">Total: <%= totalCalories %>(Calories)</span>
                </td>
            </tr>
        </tfoot>
    </table>
    <div id="editForm" style="display: none;">
        <form id="exerciseForm" onsubmit="submitForm(); return false;">
            <input type="hidden" id="editId" name="editId">
            <input type="hidden" id="editName" name="editName">
            <label for="editDuration">Duration:</label>
            <input type="number" id="editDuration" name="editDuration" required>
            <label for="editCalories">Calories burned:</label>
            <input type="number" id="editCalories" name="editCalories" required>
            <button type="submit">Save</button>
        </form>
        
        <a id="linkToHideForm" href="#" onclick="hideFormOnClick(event)">Hide Form</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="/scripts/exerciselog.js"></script>
</body>

</html>
